# GENERATED BY: test/embedding/embedding_test.dart

$ tool/test-bin/pub_command_runner.dart pub --verbose get
MSG : Resolving dependencies...
MSG : + foo 1.0.0
MSG : Downloading foo 1.0.0...
MSG : Changed 1 dependency!
MSG : Logs written to $SANDBOX/cache/log/pub_log.txt.
[E] FINE: Pub 0.1.2+3
[E] SLVR: fact: myapp is 0.0.0
[E] SLVR: derived: myapp
[E] SLVR: fact: myapp depends on foo any
[E] SLVR:   selecting myapp
[E] SLVR:   derived: foo any
[E] IO  : Get versions from http://localhost:$PORT/api/packages/foo.
[E] IO  : HTTP GET http://localhost:$PORT/api/packages/foo
[E]     | Accept: application/vnd.pub.v2+json
[E]     | X-Pub-OS: $OS
[E]     | X-Pub-Command: get
[E]     | X-Pub-Session-ID: $ID
[E]     | X-Pub-Environment: test-environment
[E]     | X-Pub-Reason: direct
[E]     | user-agent: Dart pub 0.1.2+3
[E] IO  : HTTP response 200 OK for GET http://localhost:$PORT/api/packages/foo
[E]     | took: $TIME
[E]     | date: $TIME
[E]     | content-length: 197
[E]     | x-frame-options: SAMEORIGIN
[E]     | content-type: text/plain; charset=utf-8
[E]     | x-xss-protection: 1; mode=block
[E]     | x-content-type-options: nosniff
[E]     | server: dart:io with Shelf
[E] IO  : Writing 239 characters to text file $SANDBOX/cache/hosted/localhost%58$PORT/.cache/foo-versions.json.
[E] FINE: Contents:
[E]     | {"name":"foo","uploaders":["nweiz@google.com"],"versions":[{"pubspec":{"name":"foo","version":"1.0.0"},"version":"1.0.0","archive_url":"http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz"}],"_fetchedAt":"2021-11-26T12:58:58.751686"}
[E] SLVR:     selecting foo 1.0.0
[E] SLVR: Version solving took: $TIME
[E]     | Tried 1 solutions.
[E] FINE: Resolving dependencies finished ($TIME)
[E] IO  : Get package from http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz.
[E] IO  : Created temp directory $DIR
[E] IO  : HTTP GET http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz
[E]     | X-Pub-OS: $OS
[E]     | X-Pub-Command: get
[E]     | X-Pub-Session-ID: $ID
[E]     | X-Pub-Environment: test-environment
[E]     | X-Pub-Reason: direct
[E]     | user-agent: Dart pub 0.1.2+3
[E] IO  : HTTP response 200 OK for GET http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz
[E]     | took: $TIME
[E]     | transfer-encoding: chunked
[E]     | date: $TIME
[E]     | x-frame-options: SAMEORIGIN
[E]     | content-type: text/plain; charset=utf-8
[E]     | x-xss-protection: 1; mode=block
[E]     | x-content-type-options: nosniff
[E]     | server: dart:io with Shelf
[E] IO  : Creating $FILE from stream
[E] FINE: Created $FILE from stream
[E] IO  : Created temp directory $DIR
[E] IO  : Reading binary file $FILE.
[E] FINE: Extracting .tar.gz stream to $DIR
[E] IO  : Creating $FILE from stream
[E] FINE: Created $FILE from stream
[E] IO  : Creating $FILE from stream
[E] FINE: Created $FILE from stream
[E] FINE: Extracted .tar.gz to $SANDBOX/cache/_temp/dirNCIEWF.
[E] IO  : Renaming directory $A to $B
[E] IO  : Deleting directory $DIR
[E] IO  : Writing 257 characters to text file pubspec.lock.
[E] FINE: Contents:
[E]     | # Generated by pub
[E]     | # See https://dart.dev/tools/pub/glossary#lockfile
[E]     | packages:
[E]     |   foo:
[E]     |     dependency: "direct main"
[E]     |     description:
[E]     |       name: foo
[E]     |       url: "http://localhost:$PORT"
[E]     |     source: hosted
[E]     |     version: "1.0.0"
[E]     | sdks:
[E]     |   dart: ">=0.1.2 <1.0.0"
[E] IO  : Writing 307 characters to text file .packages.
[E] FINE: Contents:
[E]     | # This file is deprecated. Tools should instead consume 
[E]     | # `.dart_tool/package_config.json`.
[E]     | # 
[E]     | # For more info see: https://dart.dev/go/dot-packages-deprecation
[E]     | # 
[E]     | # Generated by pub on 2021-11-26 12:58:58.917355.
[E]     | foo:file://$SANDBOX/cache/hosted/localhost%2558$PORT/foo-1.0.0/lib/
[E]     | myapp:lib/
[E] IO  : Writing 450 characters to text file .dart_tool/package_config.json.
[E] FINE: Contents:
[E]     | {
[E]     |   "configVersion": 2,
[E]     |   "packages": [
[E]     |     {
[E]     |       "name": "foo",
[E]     |       "rootUri": "file://$SANDBOX/cache/hosted/localhost%2558$PORT/foo-1.0.0",
[E]     |       "packageUri": "lib/",
[E]     |       "languageVersion": "2.7"
[E]     |     },
[E]     |     {
[E]     |       "name": "myapp",
[E]     |       "rootUri": "../",
[E]     |       "packageUri": "lib/",
[E]     |       "languageVersion": "0.1"
[E]     |     }
[E]     |   ],
[E]     |   "generated": "2021-11-26T12:58:58.924024Z",
[E]     |   "generator": "pub",
[E]     |   "generatorVersion": "0.1.2+3"
[E]     | }
[E] IO  : Writing 5753 characters to text file $SANDBOX/cache/log/pub_log.txt.

-------------------------------- END OF OUTPUT ---------------------------------

Information about the latest pub run.

If you believe something is not working right, you can go to 
https://github.com/pub/issues/new to post a new issue and attach this file.

Before making this file public, make sure to remove any sensitive information!

Pub version: 0.1.2+3
Created: $TIME
FLUTTER_ROOT: <not set>
PUB_HOSTED_URL: http://localhost:$PORT
PUB_CACHE: "$SANDBOX/cache"
Command: dart pub --verbose get
Platform: $OS

---- $SANDBOX/myapp/pubspec.yaml ----
{"name":"myapp","environment":{"sdk":">=0.1.2 <1.0.0"},"dependencies":{"foo":"any"}}
---- End pubspec.yaml ----
---- $SANDBOX/myapp/pubspec.lock ----
# Generated by pub
# See https://dart.dev/tools/pub/glossary#lockfile
packages:
  foo:
    dependency: "direct main"
    description:
      name: foo
      url: "http://localhost:$PORT"
    source: hosted
    version: "1.0.0"
sdks:
  dart: ">=0.1.2 <1.0.0"

---- End pubspec.lock ----
---- Log transcript ----
FINE: Pub 0.1.2+3
MSG : Resolving dependencies...
SLVR: fact: myapp is 0.0.0
SLVR: derived: myapp
SLVR: fact: myapp depends on foo any
SLVR:   selecting myapp
SLVR:   derived: foo any
IO  : Get versions from http://localhost:$PORT/api/packages/foo.
IO  : HTTP GET http://localhost:$PORT/api/packages/foo
    | Accept: application/vnd.pub.v2+json
    | X-Pub-OS: $OS
    | X-Pub-Command: get
    | X-Pub-Session-ID: $ID
    | X-Pub-Environment: test-environment
    | X-Pub-Reason: direct
    | user-agent: Dart pub 0.1.2+3
IO  : HTTP response 200 OK for GET http://localhost:$PORT/api/packages/foo
    | took: $TIME
    | date: $TIME
    | content-length: 197
    | x-frame-options: SAMEORIGIN
    | content-type: text/plain; charset=utf-8
    | x-xss-protection: 1; mode=block
    | x-content-type-options: nosniff
    | server: dart:io with Shelf
IO  : Writing 239 characters to text file $SANDBOX/cache/hosted/localhost%58$PORT/.cache/foo-versions.json.
FINE: Contents:
    | {"name":"foo","uploaders":["nweiz@google.com"],"versions":[{"pubspec":{"name":"foo","version":"1.0.0"},"version":"1.0.0","archive_url":"http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz"}],"_fetchedAt":"2021-11-26T12:58:58.751686"}
SLVR:     selecting foo 1.0.0
SLVR: Version solving took: $TIME
    | Tried 1 solutions.
FINE: Resolving dependencies finished ($TIME)
MSG : + foo 1.0.0
IO  : Get package from http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz.
MSG : Downloading foo 1.0.0...
IO  : Created temp directory $DIR
IO  : HTTP GET http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz
    | X-Pub-OS: $OS
    | X-Pub-Command: get
    | X-Pub-Session-ID: $ID
    | X-Pub-Environment: test-environment
    | X-Pub-Reason: direct
    | user-agent: Dart pub 0.1.2+3
IO  : HTTP response 200 OK for GET http://localhost:$PORT/packages/foo/versions/1.0.0.tar.gz
    | took: $TIME
    | transfer-encoding: chunked
    | date: $TIME
    | x-frame-options: SAMEORIGIN
    | content-type: text/plain; charset=utf-8
    | x-xss-protection: 1; mode=block
    | x-content-type-options: nosniff
    | server: dart:io with Shelf
IO  : Creating $FILE from stream
FINE: Created $FILE from stream
IO  : Created temp directory $DIR
IO  : Reading binary file $FILE.
FINE: Extracting .tar.gz stream to $DIR
IO  : Creating $FILE from stream
FINE: Created $FILE from stream
IO  : Creating $FILE from stream
FINE: Created $FILE from stream
FINE: Extracted .tar.gz to $SANDBOX/cache/_temp/dirNCIEWF.
IO  : Renaming directory $A to $B
IO  : Deleting directory $DIR
IO  : Writing 257 characters to text file pubspec.lock.
FINE: Contents:
    | # Generated by pub
    | # See https://dart.dev/tools/pub/glossary#lockfile
    | packages:
    |   foo:
    |     dependency: "direct main"
    |     description:
    |       name: foo
    |       url: "http://localhost:$PORT"
    |     source: hosted
    |     version: "1.0.0"
    | sdks:
    |   dart: ">=0.1.2 <1.0.0"
MSG : Changed 1 dependency!
IO  : Writing 307 characters to text file .packages.
FINE: Contents:
    | # This file is deprecated. Tools should instead consume 
    | # `.dart_tool/package_config.json`.
    | # 
    | # For more info see: https://dart.dev/go/dot-packages-deprecation
    | # 
    | # Generated by pub on 2021-11-26 12:58:58.917355.
    | foo:file://$SANDBOX/cache/hosted/localhost%2558$PORT/foo-1.0.0/lib/
    | myapp:lib/
IO  : Writing 450 characters to text file .dart_tool/package_config.json.
FINE: Contents:
    | {
    |   "configVersion": 2,
    |   "packages": [
    |     {
    |       "name": "foo",
    |       "rootUri": "file://$SANDBOX/cache/hosted/localhost%2558$PORT/foo-1.0.0",
    |       "packageUri": "lib/",
    |       "languageVersion": "2.7"
    |     },
    |     {
    |       "name": "myapp",
    |       "rootUri": "../",
    |       "packageUri": "lib/",
    |       "languageVersion": "0.1"
    |     }
    |   ],
    |   "generated": "2021-11-26T12:58:58.924024Z",
    |   "generator": "pub",
    |   "generatorVersion": "0.1.2+3"
    | }
---- End log transcript ----
-------------------------------- END OF OUTPUT ---------------------------------

$ tool/test-bin/pub_command_runner.dart pub fail
[E] Bad state: Pub has crashed
[E] tool/test-bin/pub_command_runner.dart 32:5   ThrowingCommand.runProtected
[E] package:pub/src/command.dart 184:45          PubCommand.run.<fn>
[E] package:pub/src/command.dart 184:33          PubCommand.run.<fn>
[E] dart:async                                   new Future.sync
[E] package:pub/src/utils.dart 109:12            captureErrors.wrappedCallback
[E] dart:async                                   runZonedGuarded
[E] package:pub/src/utils.dart 126:5             captureErrors
[E] package:pub/src/command.dart 184:13          PubCommand.run
[E] package:args/command_runner.dart 209:27      CommandRunner.runCommand
[E] tool/test-bin/pub_command_runner.dart 62:24  Runner.runCommand
[E] tool/test-bin/pub_command_runner.dart 53:20  Runner.run
[E] tool/test-bin/pub_command_runner.dart 67:29  main
[E] This is an unexpected error. The full log and other details are collected in:
[E] 
[E]     $SANDBOX/cache/log/pub_log.txt
[E] 
[E] Consider creating an issue on https://github.com/dart-lang/pub/issues/new
[E] and attaching the relevant parts of that log file.

-------------------------------- END OF OUTPUT ---------------------------------

Information about the latest pub run.

If you believe something is not working right, you can go to 
https://github.com/pub/issues/new to post a new issue and attach this file.

Before making this file public, make sure to remove any sensitive information!

Pub version: 0.1.2+3
Created: $TIME
FLUTTER_ROOT: <not set>
PUB_HOSTED_URL: http://localhost:$PORT
PUB_CACHE: "$SANDBOX/cache"
Command: dart pub fail
Platform: $OS

---- /usr/local/google/home/sigurdm/projects/pub_logging_to_file/pubspec.yaml ----
name: pub

environment:
  sdk: '>=2.12.0 <3.0.0'

dependencies:
  # Note: Pub's test infrastructure assumes that any dependencies used in tests
  # will be hosted dependencies.
  analyzer: ^2.7.0
  args: ^2.1.0
  async: ^2.6.1
  cli_util: ^0.3.5
  collection: ^1.15.0
  crypto: ^3.0.1
  frontend_server_client: ^2.0.0
  http: ^0.13.3
  http_multi_server: ^3.0.1
  meta: ^1.3.0
  oauth2: ^2.0.0
  path: ^1.8.0
  pool: ^1.5.0
  pub_semver: ^2.1.0
  shelf: ^1.1.1
  source_span: ^1.8.1
  stack_trace: ^1.10.0
  usage: ^4.0.2
  yaml: ^3.1.0
  yaml_edit: ^2.0.0

dev_dependencies:
  lints: ^1.0.1
  shelf_test_handler: ^2.0.0
  test: ^1.17.3
  test_descriptor: ^2.0.0
  test_process: ^2.0.0

---- End pubspec.yaml ----
---- /usr/local/google/home/sigurdm/projects/pub_logging_to_file/pubspec.lock ----
# Generated by pub
# See https://dart.dev/tools/pub/glossary#lockfile
packages:
  _fe_analyzer_shared:
    dependency: transitive
    description:
      name: _fe_analyzer_shared
      url: "https://pub.dartlang.org"
    source: hosted
    version: "30.0.0"
  analyzer:
    dependency: "direct main"
    description:
      name: analyzer
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.7.0"
  args:
    dependency: "direct main"
    description:
      name: args
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.3.0"
  async:
    dependency: "direct main"
    description:
      name: async
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.8.2"
  boolean_selector:
    dependency: transitive
    description:
      name: boolean_selector
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  charcode:
    dependency: transitive
    description:
      name: charcode
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.3.1"
  cli_util:
    dependency: "direct main"
    description:
      name: cli_util
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.3.5"
  collection:
    dependency: "direct main"
    description:
      name: collection
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.15.0"
  convert:
    dependency: transitive
    description:
      name: convert
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  coverage:
    dependency: transitive
    description:
      name: coverage
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.3"
  crypto:
    dependency: "direct main"
    description:
      name: crypto
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  file:
    dependency: transitive
    description:
      name: file
      url: "https://pub.dartlang.org"
    source: hosted
    version: "6.1.2"
  frontend_server_client:
    dependency: "direct main"
    description:
      name: frontend_server_client
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.2"
  glob:
    dependency: transitive
    description:
      name: glob
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.2"
  http:
    dependency: "direct main"
    description:
      name: http
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.13.4"
  http_multi_server:
    dependency: [...]ption:
      name: shelf_packages_handler
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.0"
  shelf_static:
    dependency: transitive
    description:
      name: shelf_static
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  shelf_test_handler:
    dependency: "direct dev"
    description:
      name: shelf_test_handler
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.0"
  shelf_web_socket:
    dependency: transitive
    description:
      name: shelf_web_socket
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.1"
  source_map_stack_trace:
    dependency: transitive
    description:
      name: source_map_stack_trace
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  source_maps:
    dependency: transitive
    description:
      name: source_maps
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.10.10"
  source_span:
    dependency: "direct main"
    description:
      name: source_span
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.8.1"
  stack_trace:
    dependency: "direct main"
    description:
      name: stack_trace
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.10.0"
  stream_channel:
    dependency: transitive
    description:
      name: stream_channel
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  string_scanner:
    dependency: transitive
    description:
      name: string_scanner
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  term_glyph:
    dependency: transitive
    description:
      name: term_glyph
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.2.0"
  test:
    dependency: "direct dev"
    description:
      name: test
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.19.4"
  test_api:
    dependency: transitive
    description:
      name: test_api
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.4.8"
  test_core:
    dependency: transitive
    description:
      name: test_core
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.4.9"
  test_descriptor:
    dependency: "direct dev"
    description:
      name: test_descriptor
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.0"
  test_process:
    dependency: "direct dev"
    description:
      name: test_process
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.2"
  typed_data:
    dependency: transitive
    description:
      name: typed_data
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.3.0"
  usage:
    dependency: "direct main"
    description:
      name: usage
      url: "https://pub.dartlang.org"
    source: hosted
    version: "4.0.2"
  vm_service:
    dependency: transitive
    description:
      name: vm_service
      url: "https://pub.dartlang.org"
    source: hosted
    version: "7.5.0"
  watcher:
    dependency: transitive
    description:
      name: watcher
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.1"
  web_socket_channel:
    dependency: transitive
    description:
      name: web_socket_channel
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  webkit_inspection_protocol:
    dependency: transitive
    description:
      name: webkit_inspection_protocol
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.0"
  yaml:
    dependency: "direct main"
    description:
      name: yaml
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.1.0"
  yaml_edit:
    dependency: "direct main"
    description:
      name: yaml_edit
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.1"
sdks:
  dart: ">=2.14.0 <3.0.0"

---- End pubspec.lock ----
---- Log transcript ----
FINE: Pub 0.1.2+3
ERR : Bad state: Pub has crashed
FINE: Exception type: StateError
ERR : tool/test-bin/pub_command_runner.dart 32:5   ThrowingCommand.runProtected
    | package:pub/src/command.dart 184:45          PubCommand.run.<fn>
    | package:pub/src/command.dart 184:33          PubCommand.run.<fn>
    | dart:async                                   new Future.sync
    | package:pub/src/utils.dart 109:12            captureErrors.wrappedCallback
    | dart:async                                   runZonedGuarded
    | package:pub/src/utils.dart 126:5             captureErrors
    | package:pub/src/command.dart 184:13          PubCommand.run
    | package:args/command_runner.dart 209:27      CommandRunner.runCommand
    | tool/test-bin/pub_command_runner.dart 62:24  Runner.runCommand
    | tool/test-bin/pub_command_runner.dart 53:20  Runner.run
    | tool/test-bin/pub_command_runner.dart 67:29  main
ERR : This is an unexpected error. The full log and other details are collected in:
    | 
    |     $SANDBOX/cache/log/pub_log.txt
    | 
    | Consider creating an issue on https://github.com/dart-lang/pub/issues/new
    | and attaching the relevant parts of that log file.
---- End log transcript ----
